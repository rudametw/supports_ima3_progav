\RequirePackage[l2tabu, orthodox]{nag}

%\documentclass[a4paper]{article}
%\documentclass[final, pdftex, a4paper, 12pt, openbib, ]{article}
%\documentclass[final, pdftex, a4paper, openbib, ]{article}
\documentclass[final, a4paper, openbib, ]{article}
\usepackage[utf8]{inputenc}
\usepackage[francais]{babel}
%\usepackage{lmodern}
\usepackage[T1]{fontenc}
%\usepackage{graphicx}
\usepackage{alltt}
\usepackage{float}
%\usepackage{times}
%\usepackage{a4wide}
\usepackage{upquote,textcomp}
\usepackage{geometry}
%\usepackage{hyperref}
\usepackage[
%pdftex,
final,                      % if you do    want to have clickable-colorful links
pdfstartview = FitV,
linktocpage  = false,       % ToC, LoF, LoT place hyperlink on page number, rather than entry text
breaklinks   = true,        % so long urls are correctly broken across lines
% pagebackref  = false,     % add page number in bibliography and link to position in document where cited
]{hyperref}
\usepackage{mathtools}
\geometry{a4paper, portrait, margin=2cm}
%\addtolength{\textheight}{2 cm}
%\addtolength{\oddsidemargin}{-1cm}
%\addtolength{\topmargin}{-1cm}
%\addtolength{\textwidth}{1 cm}

%Good solution for monospaces
%\usepackage{pxfonts} % Or palatino or mathpazo, changes all fonts to something sans
%\usepackage{eulervm} % only changes math fonts, i checked
%\usepackage[ttdefault=true]{AnonymousPro} %Only changes tt fonts
% WHICH ONE TO CHOOSE?
\usepackage{pslatex}
%\usepackage[ttdefault=true]{AnonymousPro} %Only changes tt fonts
% \usepackage[varg, cmintegrals, cmbraces, ]{newtxtext,newtxmath} % libertine, uprightGreek (U.S.) or slantedGreek (ISO), 
% \usepackage{tgtermes}
% \usepackage{txfonts}
% \usepackage{mathptmx}
% \usepackage[scaled=.90]{helvet}
% \usepackage{courier}
% \usepackage{textcomp}     % required for special glyphs
% \usepackage{bm}   


\usepackage{caption}
\captionsetup[figure]{labelformat=empty}% redefines the caption setup of the figures environment in the beamer class.

%Inconsoloata, a little too light.
%\usepackage{inconsolata}
%\renewcommand{\ttdefault}{Consolas}
\usepackage{fontspec} %Doesn't work with pdflatex
%\setmonofont{Consolas}



%\renewcommand*\familydefault{\ttdefault} %% Only if the base font of the document is to be typewriter style

%\newcommand\Fontvi{\fontsize{6}{7.2}\selectfont}

%Make tabularx center cells vertically
%\def\tabularxcolumn#1{m{#1}}
%\renewcommand{\tabularxcolumn}[1]{>{\small}m{#1}}

%%Syntax hilighting
%\usepackage{fancyvrb}
\usepackage{minted}
%\usepackage[newfloat]{minted}
\usemintedstyle{borland}
%\usepackage{etoolbox}
%\AtBeginEnvironment{minted}{\singlespacing%
%	\fontsize{14}{14}\selectfont}
%\newminted{java}{fontsize=\footnotesize}
\usepackage{caption}

%\usepackage{multicol}
%\usepackage{vwcol}
%\usepackage{lipsum}
%\usepackage{microtype}
%\setlength{\columnseprule}{0.4pt}
%\renewcommand{\columnseprulecolor}{\color{red}}
\newcommand{\BAD}[1]{{\color{red}#1}}
\newcommand{\GOOD}[1]{{\color{darkgreen}#1}}


\usepackage{graphicx}
\usepackage{colortbl,array}
\usepackage{tabularx}
\definecolor{warningbackground}{RGB}{252,226,158}

\newcommand{\alertwarningbox}[1]{
    \centering
    \begin{tabularx}{0.9\linewidth}{
        >{\columncolor{warningbackground}}c
        >{\columncolor{warningbackground}}X}
        \raisebox{\dimexpr2\baselineskip-\height}
        {\includegraphics[scale=0.8]{attention.pdf}}&
        \raisebox{\tabcolsep}{\strut}#1\raisebox{-\tabcolsep}{\strut}
    \end{tabularx}
}


\usepackage{xcolor}

%\definecolor{infobackground}{RGB}{217,237,247}
%\definecolor{infoforeground}{RGB}{58,135,173}
%\definecolor{infoborder}{RGB}{188,232,241}

\definecolor{infobackground}{RGB}{217,237,247}
\definecolor{infoforeground}{RGB}{30,50,70}
\definecolor{infoborder}{RGB}{30,50,70}

\definecolor{infobackground}{RGB}{217,237,247}
\definecolor{infoforeground}{RGB}{30, 80, 150}
\definecolor{infoborder}{RGB}{47, 87, 232}


\usepackage{environ}
\usepackage{tikz}
\usetikzlibrary{fit,backgrounds,calc}

\NewEnviron{alertinfo}[1]
{
\begin{center}
    \begin{tikzpicture}
    \node[inner sep=0pt,
          draw=infoborder,
          line width=1pt,
          fill=infobackground] (box) {\parbox[t]{0.99\textwidth}
        {%
            \begin{minipage}{.12\textwidth}
                \centering\tikz[scale=3]
                \node[scale=1]
                {
%                    \includegraphics[scale=0.25]{\images/information.pdf}
                    \includegraphics[scale=0.15]{\images/information.pdf}                    
                };
            \end{minipage}%
           \begin{minipage}{.86\textwidth}
%                \vskip 10pt
                \textbf{\textcolor{infoforeground}{\large #1}}\par\smallskip
                \textcolor{infoforeground}{\large \BODY}
                \par\smallskip
                \par\smallskip
            \end{minipage}\hfill
        }%
    };
    \end{tikzpicture}
\end{center}
}

\usepackage{titling}
\usepackage{soul}

\definecolor{Light}{gray}{.93}
\sethlcolor{Light}
\let\OldTexttt\texttt
\renewcommand{\texttt}[1]{\OldTexttt{\hl{#1}}}

\newcommand{\codes}{../codes/TP7}
\newcommand{\images}{../images}


%\title{GBIAAL 4$^{\mbox{\`eme}}$ année \\ Devoir Surveillé --- Base de données \\ 13 janvier 2016  \\ 1 heure}
\title{IMA 3$^{\mbox{\`eme}}$ année\\ Programmation Avancé
	%\\TP1 Structures, Listes contiguës, Redirections}
}
\author{\huge \textbf{TP7 Bibliothèque de listes chaînées de chaînes}}
\setlength{\parindent}{0pt}
\pagestyle{empty}
\date{}


\begin{document}
%\vspace{-15cm}
\posttitle{\par\end{center}}
\setlength{\droptitle}{-45pt}
\maketitle
%\thispagestyle{empty}

%\section{Schéma conceptuel}
\vspace{-1.7cm}
\section{Objectifs}

\begin{itemize}
	\item Savoir construire une bibliothèque à partir de code existant.
	\item Utiliser les fonctions de \texttt{string.h} (comparaison, copie).
	\item Connaître les options de \texttt{gcc} pour la compilation séparée.
	\item Savoir construire un \texttt{makefile}.
\end{itemize}

%\paragraph{Contexte et préparation : } Avant de commencer, récupérez le fichier \url{~wrudamet/public/IMA3/TP6/tp6_gdb.tgz} à la ligne de commande. Désarchivez\footnote{Vous pouvez utiliser la commande \texttt{tar} pour décompresser et désarchivez ce fichier} le dans votre répertoire de \textit{Programmation Avancé} (toujours à la ligne de commande !).

\paragraph{Contexte et préparation : } Dans ce TP, nous allons récupérer du code existant pour construire une
bibliothèque de listes que nous utiliserons au TP suivant. Cette bibliothèque contiendra les fonctions de base
sur les listes chaînées de chaînes de caractères, triées ! Les chaînes de caractères auront une taille
maximale \texttt{MAXSIZE} fixée à \texttt{30}.


% Avant de commencer, récupérez le fichier \url{~wrudamet/public/IMA3/TP6/tp6_gdb.tgz} à la ligne de commande. Désarchivez le dans votre répertoire de \textit{Programmation Avancé} (vous pouvez utiliser la commande \texttt{tar} pour décompresser et désarchivez ce fichier !).

\begin{alertinfo}{Important}
	\textbf{IMPORTANT : Ce TP sera réutilisé dans le futur. Il servira d'inspiration pour le TP8 et votre librairie sera entièrement repris pour le TP9}
\end{alertinfo}

\section{Questions du TP \large (à faire impérativement)}
Avant de commencer, récupérer les fichiers \url{~wrudamet/public/IMA3/TP7/listechaines.h}  et \url{~wrudamet/public/IMA3/TP7/accompttp7.c}

\subsection{Copier/coller rapides et ajustements}
À partir des codes dont vous disposez, créer un fichier \texttt{listechaines.c} conforme au \texttt{.h} fourni en récupérant et adaptant les fonctions déjà écrites. Les fonctions de chargement à partir d'un fichier et d'insertion dans l'ordre alphabétique sont données dans
le fichier \texttt{accompttp7.c}.\\
Écrire dans \texttt{listechaines.c} la fonction main permettant de tester toutes les fonctions.

\subsection{Compilation séparée, librairie statique}
\begin{enumerate}
	\item Déplacer le main de \texttt{listechaines.c} dans un fichier nommé \texttt{tp7.c}
	\item Compiler les deux \texttt{.c} précédents (avec l'option \texttt{-c}) et lier les deux fichiers.o obtenus pour produire un exécutable nommé \texttt{tp7} (cf cours).
	\item Si vous modifiez \texttt{tp7.c} (et uniquement ce fichier là), quelles lignes de compilation/liaison devez-vous faire ?
	\item Créer une librairie statique de nom \texttt{liblistechaines.a} à partir de \texttt{listechaines.o} (commande \texttt{ar})
	\item Quelle commande permet de lier \texttt{tp7.o} et la librairie \texttt{liblistechaines.a} ?
	\item Lancer le programme et tester.
	\item Si vous modifiez \texttt{tp7.c}, quelles commandes de compilation/liaison devez-vous faire ?
\end{enumerate}

\section{Questions s’il vous reste du temps}
\begin{enumerate}
	\item Vérifier que vous pouvez utiliser la librairie du voisin (copier son \texttt{.a} dans le répertoire courant)
	\item Observer le contenu des binaires \texttt{tp7.o} et \texttt{listechaines.o} à l'aide de la commande \texttt{nm}
	\item Construire le \texttt{Makefile} pour la compilation séparée avec création de librairie statique
\end{enumerate}


%\section{Annexes}
%\vspace{-0.5cm}

\end{document}